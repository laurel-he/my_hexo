---
title: 操作系统（2）-进程管理
date: 2021-07-20 16:34:10
tags: 
- 学习
categories: 
- 操作系统
---
蓝桥操作系统课程的学习笔记
# top
实时查看进程的状态     
**top第一行**
|内容| 解释 |
|--|--|
| top | 表示当前程序的名称 |
|14:11:28|当前系统的时间|
|up 231 days, 20:31|表示改机器已经启动了多长时间|
|1 user|表示当前系统只有一个用户|
|load average: 0.24, 0.32, 0.19|分别对应1、5、15分钟内cpu的平均负载|
**top第二行**
|内容| 解释 |
|--|--|
| Tasks: 26 toal | 进程总数 |
|1 running|1个正在运行的进程|
|25 sleeping|25个正在睡眠的进程数|
|0 stopped|没有停止的进程数|
|0 zombie|没有僵尸进程数|
**top第三行**
基本是cpu使用情况的统计
|内容| 解释 |
|--|--|
| Cpu(s):1.0%us | 用户空间进程占用cpu百分比 |
|1.0% sy|内核空间运行占用cpu百分比|
|0.0%ni|用户进程空间内改变过优先级的进程占用CPU百分比|
|9709% id|空闲CPU百分比|
|0.0% wa|等待输入输出的cpu时间百分比|
|0.1%hi|硬中断（Hardware IRQ）占用CPU的百分比|
|0.0% si|软中断（Software IRQ）占用CPU的百分比|
|0.0% st| (Steal time)是hypervisor等虚拟服务中，虚拟cpu等待实际cpu的时间的百分比|
**top第四行数据**
内存使用情况的统计    
|内容| 解释 |
|--|--|
| 821324 total | 物理内存总量 |
| 811324 used| 使用的物理内存总量 |
| 10000 free| 空闲内存总量 |
| 212088 buffers| 用作内核缓存的内存量 |
**top第五行数据**
交换区的使用情况的统计    
| 内容 |解释  |
|--|--|
| total | 交换区总量 |
|used|使用的交换区总量|
|free|空闲交换区总量|
|cached|缓冲的交换区总量，内存中的内容被换出到交换区，而后又被换入到内存，但使用过的交换区尚未被覆盖|
### top进程情况
|列名|解释  |
|--|--|
|  PID|  进程ID|
|USER|该进程的所属用户|
|PR|该进程执行的优先级priority值（动态优先级，实际的优先级值，读取自宏MAX_PRIO,值为140，取值范围为0-139,值越小优先级越高。0-99是实时进程的值，100-139是给用户的 PR=20 + NICE值）|
|NI|该进程的nice值(每个进程都有一个介于 -20 到 19 之间的 nice 值。默认情况下，进程的 nice 值为 0。-20优先级最高，19优先级最低。 进程的 nice 值，可以通过 nice 命令和 renice 命令修改，进而调整进程的运行顺序。 nice命令 nice 命令 可以给要启动的进程赋予 NI 值，但是不能修改已运行进程的 NI 值)|
|VIRT|该进程任务所使用的虚拟内存的总数（包含所有的代码，数据，共享库和被换出的swap空间的页面等所占据空间的总数）|
|RES|该进程所使用的物理内存数，也称之为驻留内存数|
|SHR|该进程共享内存的大小|
|S|该进程的状态S=sleeping R=running Z=zombie|
|%CPU|该进程cpu的利用率|
|%MEM|该进程内存的利用率|
|TIME+|该进程活跃的总时间|
|COMMAND|该进程运行的名字|
### top工具的交互命令
|常用交互命令|解释  |
|--|--|
|q  |退出程序  |
|I|切换显示平均负载和启动时间的信息|
|P|根据CPU使用百分比进行大小排序|
|M|根据驻留内存大小进行排序|
|i|忽略闲置和僵死的进程，开关式命令|
|k|终止一个命令，系统提示输入PID及发送的信号值。一般终止进程用15信号，不能正常结束则使用9信号。安全模式下该命令被屏蔽|

# ps
ps也是最常用的查看进程的工具之一
|内容| 解释 |
|--|--|
| USER |进程的拥有者用户  |
|PID|进程的id|

### 查看物理CPU的个数
```
cat /proc/cpuinfo |grep "physical id"|sort |uniq|wc -l
```

### 每个cpu的核心数
```
cat /proc/cpuinfo |grep "physical id"|grep "0"|wc -l
```
# ps
静态查看当前的进程信息
# pstree
查看当前活跃进程的树形结构
|参数|含义  |
|--|--|
|  p|同时列出每个process的pid  |
|  u|同时列出每个process的所属账户名称  |
# 进程的执行顺序
进程的优先级由pr和nice值来控制和体现，nice值的取值范围是-20到19，可以通过nice命令进行操控
```
nice -n -5 vim &  //-n后跟需要设置的谦让值，正数需要管理员权限，负数不需要
renice -5 pid
```
